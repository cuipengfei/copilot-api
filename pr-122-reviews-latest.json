[
    {
        "id": 3292191122,
        "node_id": "PRR_kwDONot0Ic7EOtmS",
        "user": {
            "login": "copilot-pull-request-reviewer[bot]",
            "id": 175728472,
            "node_id": "BOT_kgDOCnlnWA",
            "avatar_url": "https://avatars.githubusercontent.com/in/946600?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D",
            "html_url": "https://github.com/apps/copilot-pull-request-reviewer",
            "followers_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/received_events",
            "type": "Bot",
            "user_view_type": "public",
            "site_admin": false
        },
        "body": "## Pull Request Overview\n\nAdds Gemini API compatibility layer: routing, request/response translation, streaming adaptation, tool call handling, and extensive test coverage. Key changes introduce new generate-content route, translation utilities, tool-call accumulation logic, and debug logging.\n- Adds geminiRouter and handlers for generateContent, streamGenerateContent, and countTokens endpoints.\n- Implements translation between Gemini request/response formats and existing OpenAI/Copilot internal structures, including streaming tool call argument accumulation.\n- Introduces comprehensive test suites covering routing, validation, translation edge cases, streaming behavior, and tool call workflows.\n\n### Reviewed Changes\n\nCopilot reviewed 18 out of 20 changed files in this pull request and generated 5 comments.\n\n<details>\n<summary>Show a summary per file</summary>\n\n| File | Description |\r\n| ---- | ----------- |\r\n| src/server.ts | Registers Gemini router to expose new v1beta endpoints. |\r\n| src/routes/generate-content/route.ts | Adds URL pattern routing for generate, stream, and countTokens operations. |\r\n| src/routes/generate-content/handler.ts | Core handlers for non-stream, stream, and token count flows plus fallback streaming conversion. |\r\n| src/routes/generate-content/translation.ts | Large translation layer Gemini <-> OpenAI, tool call/message normalization, streaming chunk translation. |\r\n| src/routes/generate-content/utils.ts | Finish reason mapping utility. |\r\n| src/routes/generate-content/types.ts | Defines Gemini request/response and streaming types. |\r\n| src/lib/tool-call-utils.ts | Tool declaration translation and streaming tool call argument accumulator. |\r\n| src/lib/debug-logger.ts | Debug logging utilities for requests/responses. |\r\n| tests/generate-content/*.test.ts | Extensive new test coverage for routing, validation, translation, streaming, and edge cases. |\r\n| tests/generate-content/_test-utils.ts | Shared test helper utilities. |\r\n| tests/generate-content/test-types.ts | Test-only type helpers. |\n</details>\n\n\n\n\n\n\n---\n\n<sub>**Tip:** Customize your code reviews with copilot-instructions.md. <a href=\"/ericc-ch/copilot-api/new/master/.github?filename=copilot-instructions.md\" class=\"Link--inTextBlock\" target=\"_blank\" rel=\"noopener noreferrer\">Create the file</a> or <a href=\"https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot\" class=\"Link--inTextBlock\" target=\"_blank\" rel=\"noopener noreferrer\">learn how to get started</a>.</sub>",
        "state": "COMMENTED",
        "html_url": "https://github.com/ericc-ch/copilot-api/pull/122#pullrequestreview-3292191122",
        "pull_request_url": "https://api.github.com/repos/ericc-ch/copilot-api/pulls/122",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "html": {
                "href": "https://github.com/ericc-ch/copilot-api/pull/122#pullrequestreview-3292191122"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/ericc-ch/copilot-api/pulls/122"
            }
        },
        "submitted_at": "2025-10-02T04:28:39Z",
        "commit_id": "e04137d411cd9af04cb0751dcac801e6f37691f9"
    },
    {
        "id": 3301886195,
        "node_id": "PRR_kwDONot0Ic7Ezsjz",
        "user": {
            "login": "copilot-pull-request-reviewer[bot]",
            "id": 175728472,
            "node_id": "BOT_kgDOCnlnWA",
            "avatar_url": "https://avatars.githubusercontent.com/in/946600?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D",
            "html_url": "https://github.com/apps/copilot-pull-request-reviewer",
            "followers_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/received_events",
            "type": "Bot",
            "user_view_type": "public",
            "site_admin": false
        },
        "body": "## Pull Request Overview\n\nCopilot reviewed 18 out of 20 changed files in this pull request and generated 8 comments.\n\n\n\n\n\n---\n\n<sub>**Tip:** Customize your code reviews with copilot-instructions.md. <a href=\"/ericc-ch/copilot-api/new/master/.github?filename=copilot-instructions.md\" class=\"Link--inTextBlock\" target=\"_blank\" rel=\"noopener noreferrer\">Create the file</a> or <a href=\"https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot\" class=\"Link--inTextBlock\" target=\"_blank\" rel=\"noopener noreferrer\">learn how to get started</a>.</sub>",
        "state": "COMMENTED",
        "html_url": "https://github.com/ericc-ch/copilot-api/pull/122#pullrequestreview-3301886195",
        "pull_request_url": "https://api.github.com/repos/ericc-ch/copilot-api/pulls/122",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "html": {
                "href": "https://github.com/ericc-ch/copilot-api/pull/122#pullrequestreview-3301886195"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/ericc-ch/copilot-api/pulls/122"
            }
        },
        "submitted_at": "2025-10-04T13:58:57Z",
        "commit_id": "e1a5b3b6fcc4d85f75fca00e3753a59e04192fd9"
    }
]